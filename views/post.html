{% extends 'base.html' %}

{% block main %}

<script src="/js/threadedComments.js"></script>

<div class="post">
	<a href="{{ post.url }}">{{ post.title }}</a>
	<p>
		<span class="post-subtext">submitted by</span>
		<span class="post-subtext">{{ post.author.username }}</span>
		<span class="post-subtext"> - </span>
		<span class="post-subtext">{{ post.date|date('m/d/Y g:i A') }}</span>
	</p>

	<form action="/post/{{ post.id }}/comment" method="post" role="form">
		<div class="form-group">
			<textarea class="form-control" rows="4" name="text"></textarea>
		</div>
		<button type="submit" class="btn btn-default">Comment</button>
	</form>

	{% for comment in post.comments %}
	<div class="comment" id="comment-{{ comment.id }}">
		<div class="well well-sm">{{ comment.text }}</div>
		<span class="comment-subtext">{{ comment.author.username }}</span>
		<span class="comment-subtext"> - </span>
		<span class="comment-subtext">{{ comment.date|date('m/d/Y g:i A') }} </span>
		<span class="comment-subtext">
			<a onclick="showReply({{ comment.id }});" id="comment-{{ comment.id }}-reply-link">reply</a>
		</span>
		<form action="/comment/{{ comment.id }}/comment" method="post" role="form" class="hidden-reply"
			id="comment-{{ comment.id }}-reply-form">
			<div class="form-group">
				<textarea class="form-control" rows="4" name="text"></textarea>
			</div>
			<button type="submit" class="btn btn-primary">Reply</button>
			<button type="button" onclick="hideReply({{ comment.id }});" class="btn btn-default">Cancel</button>
		</form>
	</div>
	{% endfor %}

</div>

{% endblock %}
